<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nombres FranÃ§ais</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ”¢ Apprendre les Nombres FranÃ§ais</h1>
            <p class="subtitle">MaÃ®trisez les nombres cardinaux et ordinaux</p>
        </header>

        <div class="controls">
            <div class="control-group">
                <label for="category-select">Choisir une catÃ©gorie :</label>
                <select id="category-select">
                    <option value="">-- SÃ©lectionnez une catÃ©gorie --</option>
                </select>
            </div>
        </div>

        <div id="numbers-container"></div>
    </div>

    <script>
        const categorySelect = document.getElementById('category-select');
        const numbersContainer = document.getElementById('numbers-container');

        // Load categories from main JSON file
        async function loadCategories() {
            try {
                const response = await fetch('nombres_franÃ§ais.json');
                if (!response.ok) throw new Error('Impossible de charger les catÃ©gories');
                
                const categories = await response.json();
                
                let defaultFile = null;
                
                categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category.file;
                    option.textContent = category.name;
                    categorySelect.appendChild(option);
                    
                    // Set first category as default
                    if (!defaultFile) {
                        defaultFile = category.file;
                    }
                });
                
                // Load default category
                if (defaultFile) {
                    categorySelect.value = defaultFile;
                    loadNumbers(defaultFile);
                }
                
            } catch (error) {
                console.error('Error loading categories:', error);
                numbersContainer.innerHTML = '<div class="error">Erreur de chargement des catÃ©gories</div>';
            }
        }

        // Load numbers from selected category
        async function loadNumbers(filename) {
            try {
                numbersContainer.innerHTML = '<div class="loading">Chargement...</div>';
                
                const response = await fetch(`nombres/${filename}`);
                if (!response.ok) throw new Error('Impossible de charger les nombres');
                
                const numbers = await response.json();
                displayNumbers(numbers);
                
            } catch (error) {
                console.error('Error loading numbers:', error);
                numbersContainer.innerHTML = '<div class="error">Erreur de chargement des nombres</div>';
            }
        }

        // Display numbers
        function displayNumbers(numbers) {
            numbersContainer.innerHTML = '';
            
            numbers.forEach(number => {
                const numberCard = document.createElement('div');
                numberCard.className = 'card number-card';
                
                let content = `
                    <div class="number-display">
                        <div class="number-value">${number.numeral || number.number}</div>
                        <div class="number-french">${number.french}</div>
                        <div class="number-english">${number.english}</div>
                    </div>
                `;
                
                // Add pronunciation guide if available
                if (number.pronunciation) {
                    content += `<div class="pronunciation">ðŸ”Š ${number.pronunciation}</div>`;
                }
                
                // Add notes if available
                if (number.note) {
                    content += `<div class="note">ðŸ’¡ ${number.note}</div>`;
                }
                
                // Add examples if available
                if (number.examples && number.examples.length > 0) {
                    content += '<div class="examples"><strong>Exemples:</strong><ul>';
                    number.examples.forEach(example => {
                        content += `<li>${example.french} <span class="translation">(${example.english})</span></li>`;
                    });
                    content += '</ul></div>';
                }
                
                numberCard.innerHTML = content;
                numbersContainer.appendChild(numberCard);
            });
        }

        // Event listener for category selection
        categorySelect.addEventListener('change', (e) => {
            const selectedFile = e.target.value;
            if (selectedFile) {
                loadNumbers(selectedFile);
            } else {
                numbersContainer.innerHTML = '';
            }
        });

        // Initialize
        loadCategories();
    </script>
</body>
</html>
